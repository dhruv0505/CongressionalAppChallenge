<html>
    <header>
        <title></title>
        <link rel="stylesheet" href="style.css">
        <script type="module">
            if ((typeof localStorage.getItem("userID") !== "undefined" && !(typeof localStorage.getItem("userID") === "string" && localStorage.getItem("userID")=="undefined")) && window.location.href.slice(-10)=="login.html"){
                window.location.href = "home.html";
            }

            if ((typeof localStorage.getItem("userID") === "undefined" || (typeof localStorage.getItem("userID") === "string" && localStorage.getItem("userID")=="undefined"))&& window.location.href.slice(-10)!="login.html"){
                window.location.href = "login.html";
            }
            // Import the functions you need from the SDKs you need
            import { initializeApp } from "https://www.gstatic.com/firebasejs/9.12.1/firebase-app.js";
            import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.12.1/firebase-analytics.js";
            import {getAuth, signOut, GoogleAuthProvider} from "https://www.gstatic.com/firebasejs/9.12.1/firebase-auth.js";
            import {getDatabase, get, ref, child, set} from "https://www.gstatic.com/firebasejs/9.12.1/firebase-database.js";
            // TODO: Add SDKs for Firebase products that you want to use
            // https://firebase.google.com/docs/web/setup#available-libraries

            // Your web app's Firebase configuration
            // For Firebase JS SDK v7.20.0 and later, measurementId is optional
            const firebaseConfig = {
            apiKey: "AIzaSyBnJyc59TYOtolpuh2y9k3JSQdEf8ARg5s",
            authDomain: "the-planet-challenge-4649a.firebaseapp.com",
            projectId: "the-planet-challenge-4649a",
            storageBucket: "the-planet-challenge-4649a.appspot.com",
            messagingSenderId: "110680044656",
            appId: "1:110680044656:web:6cc9f484ba63fad70db0b5",
            measurementId: "G-L5187QDXCJ",
            databaseURL: "https://the-planet-challenge-4649a-default-rtdb.firebaseio.com/"
            };

            // Initialize Firebase
            const app = initializeApp(firebaseConfig);
            const analytics = getAnalytics(app);
            function resetChallenge(){
                let d = new Date();
                let localTime = d.getTime();
                let localOffset = d.getTimezoneOffset() * 60000;
                let utc = localTime + localOffset;
                let pstTime = utc+(3600000*-7);
                let pst = new Date(pstTime);
                return set(ref(db, `Challenge`), {
                    Category: "Water",
                    Date: pst.getDate(),
                    Month: pst.getMonth(),
                    Title: "5 Minute Shower or Less",
                    Year: pst.getFullYear()
                })
            }
            function getMonth(monthNum){
                let month=""
                if (monthNum==0){
                    month="January";
                }
                if (monthNum==1){
                    month="February";
                }
                if (monthNum==2){
                    month="March";
                }
                if (monthNum==3){
                    month="April";
                }
                if (monthNum==4){
                    month="May";
                }
                if (monthNum==5){
                    month="June";
                }
                if (monthNum==6){
                    month="July";
                }
                if (monthNum==7){
                    month="August";
                }
                if (monthNum==8){
                    month="September";
                }
                if (monthNum==9){
                    month="October";
                }
                if (monthNum==10){
                    month="November";
                }
                if (monthNum==11){
                    month="December";
                }
                return month;
            }

            const db = getDatabase(app);
            const dbRef = ref(db);

            get(child(dbRef, `Challenge`)).then((snapshot) => {
                if (snapshot.exists()) {
                    let d = new Date();
                    let localTime = d.getTime();
                    let localOffset = d.getTimezoneOffset() * 60000;
                    let utc = localTime + localOffset;
                    let pstTime = utc+(3600000*-7);
                    let pst = new Date(pstTime);
                    if (snapshot.val()["Month"]!=getMonth(pst.getMonth()) || snapshot.val()["Date"]!=pst.getDate() || snapshot.val()["Year"]!=pst.getFullYear()){
                        resetChallenge();
                    }
                } else {
                    console.log("No data available");
                }
            }).catch((error) => {
                console.error(error);
            });           
            document.getElementById("allGroupsPage").setAttribute("style", "margin-top:95px;");
            function signOut2(){
                const auth = getAuth();
                signOut(auth).then(() => {
                    localStorage.setItem("userID", "undefined")
                    window.location.href="login.html";
                }).catch((error) => {
                // An error happened.
                });
            }
            document.getElementById("logout").addEventListener("click", () => {signOut2()})

            const database = getDatabase(app)
        </script>
        <script src="script.js"></script>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@48,400,0,0" />
    </header>
    <body>
        <!-- NAV BAR -->
        <div class="nav centerContainer">
            <table style="width:1200px;height:75px;">
                <tr>
                    <td>
                        <table>
                            <tr>
                                <td style="width:30px"><a href="home.html" class="navOption centerContainer tooltip"><div class="material-symbols-rounded" style="font-size:30px;">home</div><span>Home</span></a></td>
                                <td style="width:30px;"><a href="allGroups.html" class="navOption centerContainer tooltip"><div class="material-symbols-rounded" style="font-size:30px;">dashboard</div><span>All Groups</span></a></td>
                                <td style="width:30px;"><a href="badges.html" class="navOption centerContainer tooltip"><div class="material-symbols-rounded" style="font-size:30px;">stars</div><span>Badges</span></a></td>
                                <td style="width:30px;"><a href="profilePage.html" class="navOption centerContainer tooltip"><div class="material-symbols-rounded" style="font-size:30px;">person</div><span>Profile</span></a></td>
                            </tr>
                        </table>
                    </td>
                    <td style="padding-top:3px;padding-right:30px;font-size:45px;width:100%;text-align:center;">THE PLANET CHALLENGE - BADGES</td>
                    <td><div style="width:258px;display:flex;justify-content:flex-end;"><a class="navOption centerContainer tooltip2" id="logout"><div class="material-symbols-rounded" style="font-size:30px;">logout</div><span>Log Out</span></a></div></td>
                </tr>
            </table>
        </div>
        <div class="centerContainer" id="allGroupsPage" style="margin-top:75px;display:none;">
            <div class="allGroupsDashboard" style="width:1200px">
                <h1 class="centerContainer"><img class="material-symbols-rounded" src="Images/groups.svg" style="width:50px;">&nbspMY GROUPS:</h1>
                <table style="width:100%">
                <tr>
                    <td>
                        <table  style="background-color: rgb(7, 195, 195);align-items: center; padding: 20;border-radius: 100px;border: 4px solid black;margin-left: 25px;">
                            <tr>
                                <td style="text-align: center;;">
                                <div style = "vertical-align: center;font-size: 35px;"> <b>JOIN</div>
                                <input type="number" min="10000" max = 99999 maxlength="5" placeholder="Enter Code" style="margin-top: 10px;text-align: center;width: 170;height: 33;font-size: 25;padding-left: 10;border-radius: 10px;">
                                <div><button id = "joinbtn" onclick = "joinbtn()" style="border-radius: 5px;font-size:19;margin-top: 2px;">Join</div>
                                <script>
                                    function joinbtn(){
                                        const btn = document.getElementById("joinbtn");
                                        btn.textContent = "Joined";
                                    }
                                </script>
                                </td>
                            </tr>
                            <tr style="padding-top: 0;">
                                <td style="margin-top: 0;text-align: center;">
                                    <div style="font-size:35px;text-align: center;margin-top: 30px;"><b>CREATE</div>
                                    <button style="margin-top: 10px;text-align: center;width: 120;height:80;border-radius: 72px;"><a href="createGroup.html"><img class="material-symbols-rounded" src="Images/add_circle.svg" style="width:72px;"></a></button>
                                </td>
                            </tr>
                        </table>
                    </td> 
                    <td style = "height:10px"><div class="group">
                        <div class="textGroup" style="text-align:center;">
                            <div style="float:left ;vertical-align: middle;font-family: '', serif;color:rgb(0, 0, 0);font-size:45px; border-radius: 5px;">Irvington</div>
                            <div style="float: right;"><a href="editGroup.html"><div class="material-symbols-rounded" style="font-size:30px;">edit</div></a></div>
                            <div style="margin-left: 30px;vertical-align: middle;;font-family: '', serif;color:rgb(90, 4, 4);font-size:29px; border-radius: 5px;">(Owner)</div>
                            <img style="width:150px;height:150px;"src="Images/logoinsert.png">
                            <div style="vertical-align: middle;font-family: '', serif;color:rgb(90, 4, 4);font-size:25px; border-radius: 5px;">4000 Members</div>
                        </div>
                    </div></td> 
                    <td style = "height:10px"><div class="group">
                        <div class="textGroup" style="text-align:center;">
                            <div style="float:left ;vertical-align: middle;font-family: '', serif;color:rgb(0, 0, 0);font-size:45px; border-radius: 5px;">Irvington</div>
                            <div style="float: right;"><a href="editGroup.html"><img src="Images/pencil3.png" class="pfp" style="margin-left: 8px;display:block;width:20px;height:20px;"></a></div>
                            <div style="margin-left: 30px;vertical-align: middle;;font-family: '', serif;color:rgb(90, 4, 4);font-size:29px; border-radius: 5px;">(Owner)</div>
                            <img style="width:150px;height:150px;"src="Images/logoinsert.png">
                            <div style="vertical-align: middle;font-family: '', serif;color:rgb(90, 4, 4);font-size:25px; border-radius: 5px;">4000 Members</div>
                        </div>
                    </div></td>  
                    <td style = "height:10px"><div class="group">
                        <div class="textGroup" style="text-align:center;">
                            <div style="float:left ;vertical-align: middle;font-family: '', serif;color:rgb(0, 0, 0);font-size:45px; border-radius: 5px;">Irvington</div>
                            <div style="float: right;"><a href="editGroup.html"><img src="Images/pencil3.png" class="pfp" style="margin-left: 8px;display:block;width:20px;height:20px;"></a></div>
                            <div style="margin-left: 30px;vertical-align: middle;;font-family: '', serif;color:rgb(90, 4, 4);font-size:29px; border-radius: 5px;">(Owner)</div>
                            <img style="width:150px;height:150px;"src="Images/logoinsert.png">
                            <div style="vertical-align: middle;font-family: '', serif;color:rgb(90, 4, 4);font-size:25px; border-radius: 5px;">4000 Members</div>
                        </div>
                    </div></td>  
                     
                    
                </tr>
                <tr>
                    <td style = "height:10px"><div class="group">
                        <div class="textGroup" style="text-align:center;">
                            <div style="float:left ;vertical-align: middle;font-family: '', serif;color:rgb(0, 0, 0);font-size:45px; border-radius: 5px;">Irvington</div>
                            <div style="float: right;"><a href="editGroup.html"><img src="Images/pencil3.png" class="pfp" style="margin-left: 8px;display:block;width:20px;height:20px;"></a></div>
                            <div style="margin-left: 30px;vertical-align: middle;;font-family: '', serif;color:rgb(90, 4, 4);font-size:29px; border-radius: 5px;">(Owner)</div>
                            <img style="width:150px;height:150px;"src="Images/logoinsert.png">
                            <div style="vertical-align: middle;font-family: '', serif;color:rgb(90, 4, 4);font-size:25px; border-radius: 5px;">4000 Members</div>
                        </div>
                    </div></td> 
                    <td style = "height:10px"><div class="group">
                        <div class="textGroup" style="text-align:center;">
                            <div style="float:left ;vertical-align: middle;font-family: '', serif;color:rgb(0, 0, 0);font-size:45px; border-radius: 5px;">Irvington</div>
                            <div style="float: right;"><a href="editGroup.html"><img src="Images/pencil3.png" class="pfp" style="margin-left: 8px;display:block;width:20px;height:20px;"></a></div>
                            <div style="margin-left: 30px;vertical-align: middle;;font-family: '', serif;color:rgb(90, 4, 4);font-size:29px; border-radius: 5px;">(Owner)</div>
                            <img style="width:150px;height:150px;"src="Images/logoinsert.png">
                            <div style="vertical-align: middle;font-family: '', serif;color:rgb(90, 4, 4);font-size:25px; border-radius: 5px;">4000 Members</div>
                        </div>
                    </div></td> 
                    <td style = "height:10px"><div class="group">
                        <div class="textGroup" style="text-align:center;">
                            <div style="float:left ;vertical-align: middle;font-family: '', serif;color:rgb(0, 0, 0);font-size:45px; border-radius: 5px;">Irvington</div>
                            <div style="float: right;"><a href="editGroup.html"><img src="Images/pencil3.png" class="pfp" style="margin-left: 8px;display:block;width:20px;height:20px;"></a></div>
                            <div style="margin-left: 30px;vertical-align: middle;;font-family: '', serif;color:rgb(90, 4, 4);font-size:29px; border-radius: 5px;">(Owner)</div>
                            <img style="width:150px;height:150px;"src="Images/logoinsert.png">
                            <div style="vertical-align: middle;font-family: '', serif;color:rgb(90, 4, 4);font-size:25px; border-radius: 5px;">4000 Members</div>
                        </div>
                    </div></td> 
                    <td style = "height:10px"><div class="group">
                        <div class="textGroup" style="text-align:center;">
                            <div style="float:left ;vertical-align: middle;font-family: '', serif;color:rgb(0, 0, 0);font-size:45px; border-radius: 5px;">Irvington</div>
                            <div style="float: right;"><a href="editGroup.html"><img src="Images/pencil3.png" class="pfp" style="margin-left: 8px;display:block;width:20px;height:20px;"></a></div>
                            <div style="margin-left: 30px;vertical-align: middle;;font-family: '', serif;color:rgb(90, 4, 4);font-size:29px; border-radius: 5px;">(Owner)</div>
                            <img style="width:150px;height:150px;"src="Images/logoinsert.png">
                            <div style="vertical-align: middle;font-family: '', serif;color:rgb(90, 4, 4);font-size:25px; border-radius: 5px;">4000 Members</div>
                        </div>
                    </div></td>  
                </tr>
                <tr>
                    <td style = "height:10px"><div class="group">
                        <div class="textGroup" style="text-align:center;">
                            <div style="float:left ;vertical-align: middle;font-family: '', serif;color:rgb(0, 0, 0);font-size:45px; border-radius: 5px;">Irvington</div>
                            <div style="float: right;"><a href="editGroup.html"><img src="Images/pencil3.png" class="pfp" style="margin-left: 8px;display:block;width:20px;height:20px;"></a></div>
                            <div style="margin-left: 30px;vertical-align: middle;;font-family: '', serif;color:rgb(90, 4, 4);font-size:29px; border-radius: 5px;">(Owner)</div>
                            <img style="width:150px;height:150px;"src="Images/logoinsert.png">
                            <div style="vertical-align: middle;font-family: '', serif;color:rgb(90, 4, 4);font-size:25px; border-radius: 5px;">4000 Members</div>
                        </div>
                    </div></td> 
                    <td style = "height:10px"><div class="group">
                        <div class="textGroup" style="text-align:center;">
                            <div style="float:left ;vertical-align: middle;font-family: '', serif;color:rgb(0, 0, 0);font-size:45px; border-radius: 5px;">Irvington</div>
                            <div style="float: right;"><a href="editGroup.html"><img src="Images/pencil3.png" class="pfp" style="margin-left: 8px;display:block;width:20px;height:20px;"></a></div>
                            <div style="margin-left: 30px;vertical-align: middle;;font-family: '', serif;color:rgb(90, 4, 4);font-size:29px; border-radius: 5px;">(Owner)</div>
                            <img style="width:150px;height:150px;"src="Images/logoinsert.png">
                            <div style="vertical-align: middle;font-family: '', serif;color:rgb(90, 4, 4);font-size:25px; border-radius: 5px;">4000 Members</div>
                        </div>
                    </div></td> 
                    <td style = "height:10px"><div class="group">
                        <div class="textGroup" style="text-align:center;">
                            <div style="float:left ;vertical-align: middle;font-family: '', serif;color:rgb(0, 0, 0);font-size:45px; border-radius: 5px;">Irvington</div>
                            <div style="float: right;"><a href="editGroup.html"><img src="Images/pencil3.png" class="pfp" style="margin-left: 8px;display:block;width:20px;height:20px;"></a></div>
                            <div style="margin-left: 30px;vertical-align: middle;;font-family: '', serif;color:rgb(90, 4, 4);font-size:29px; border-radius: 5px;">(Owner)</div>
                            <img style="width:150px;height:150px;"src="Images/logoinsert.png">
                            <div style="vertical-align: middle;font-family: '', serif;color:rgb(90, 4, 4);font-size:25px; border-radius: 5px;">4000 Members</div>
                        </div>
                    </div></td>  
                </tr>
                </table>
            </div>
        </div>
    </body>
</html>